# è¯¾ç¨‹ç®¡ç†æ¨¡å—é‡æ„è¯´æ˜

## ğŸ“ é¡¹ç›®ç»“æ„

```
classManagement/
â”œâ”€â”€ index.vue                    # åŸå§‹æ–‡ä»¶ï¼ˆä¿ç•™ï¼‰
â”œâ”€â”€ index-refactored.vue         # é‡æ„åçš„ä¸»æ–‡ä»¶
â”œâ”€â”€ README.md                    # æœ¬è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ constants/                   # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ index.js                # æšä¸¾ã€é…ç½®å¸¸é‡
â”œâ”€â”€ utils/                       # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ helpers.js              # è¾…åŠ©å‡½æ•°ï¼ˆæ ¼å¼åŒ–ã€è®¡ç®—ç­‰ï¼‰
â”œâ”€â”€ services/                    # APIæœåŠ¡å±‚
â”‚   â””â”€â”€ classManagement.js      # ç»Ÿä¸€çš„APIè°ƒç”¨
â”œâ”€â”€ mixins/                      # æ··å…¥
â”‚   â””â”€â”€ dragMixin.js            # æ‹–æ‹½åŠŸèƒ½æ··å…¥
â”œâ”€â”€ components/                  # ç»„ä»¶ç›®å½•
â”‚   â”œâ”€â”€ LeftMenu.vue            # å·¦ä¾§èœå•ç»„ä»¶
â”‚   â”œâ”€â”€ ClassList.vue           # è¯¾ç¨‹åˆ—è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ ClassCard.vue           # è¯¾ç¨‹å¡ç‰‡ç»„ä»¶
â”‚   â”œâ”€â”€ ScheduleCalendar.vue    # æ—¥ç¨‹è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ ScheduleClassCard.vue   # æ—¥ç¨‹è¯¾ç¨‹å¡ç‰‡
â”‚   â”œâ”€â”€ ActivityCard.vue        # è¿åŠ¨è®°å½•å¡ç‰‡
â”‚   â”œâ”€â”€ CycleStageDetails.vue   # éª‘è¡Œè¯¦æƒ…ç»„ä»¶
â”‚   â”œâ”€â”€ RunStageDetails.vue     # è·‘æ­¥è¯¦æƒ…ç»„ä»¶
â”‚   â”œâ”€â”€ StatisticsPanel.vue     # ç»Ÿè®¡é¢æ¿ç»„ä»¶
â”‚   â””â”€â”€ ...                     # å…¶ä»–ç°æœ‰ç»„ä»¶
â”œâ”€â”€ statisticKeyToTitle.js      # ç»Ÿè®¡æ•°æ®æ˜ å°„ï¼ˆä¿ç•™ï¼‰
â””â”€â”€ uilt.js                      # è®¡ç®—å·¥å…·ç±»ï¼ˆä¿ç•™ï¼‰
```

## ğŸ¯ é‡æ„ç›®æ ‡

### 1. ä»£ç æ‹†åˆ†
- âœ… å°†3698è¡Œçš„å•æ–‡ä»¶æ‹†åˆ†æˆå¤šä¸ªèŒè´£å•ä¸€çš„ç»„ä»¶
- âœ… æ¯ä¸ªç»„ä»¶ä¸è¶…è¿‡300è¡Œ
- âœ… æé«˜ä»£ç å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§

### 2. åŠŸèƒ½è§£è€¦
- âœ… åˆ†ç¦»ä¸šåŠ¡é€»è¾‘å’Œè§†å›¾å±‚
- âœ… æå–å…¬å…±é€»è¾‘åˆ°æ··å…¥å’Œå·¥å…·å‡½æ•°
- âœ… ç»Ÿä¸€APIè°ƒç”¨åˆ°æœåŠ¡å±‚

### 3. æ ·å¼ä¿æŒ
- âœ… å®Œå…¨ä¿æŒåŸæœ‰CSSæ ·å¼
- âœ… ç”¨æˆ·ç•Œé¢æ— ä»»ä½•å˜åŒ–
- âœ… äº¤äº’ä½“éªŒä¿æŒä¸€è‡´

## ğŸ“¦ æ ¸å¿ƒç»„ä»¶è¯´æ˜

### 1. LeftMenuï¼ˆå·¦ä¾§èœå•ï¼‰
**åŠŸèƒ½ï¼š** è¿åŠ¨å‘˜/è¯¾ç¨‹åˆ‡æ¢èœå•

**Propsï¼š**
- `value` - å½“å‰æ¿€æ´»çš„èœå•é¡¹

**Eventsï¼š**
- `change` - èœå•åˆ‡æ¢äº‹ä»¶

### 2. ClassListï¼ˆè¯¾ç¨‹åˆ—è¡¨ï¼‰
**åŠŸèƒ½ï¼š** æ˜¾ç¤ºè¯¾ç¨‹åˆ—è¡¨ï¼Œæ”¯æŒæœç´¢ã€åˆ†ç»„ç®¡ç†

**Propsï¼š**
- `classList` - è¯¾ç¨‹æ•°æ®
- `activeClassType` - è¯¾ç¨‹ç±»å‹ï¼ˆæˆ‘çš„/å®˜æ–¹ï¼‰

**Eventsï¼š**
- `class-type-change` - è¯¾ç¨‹ç±»å‹åˆ‡æ¢
- `search` - æœç´¢äº‹ä»¶
- `add-class` - æ–°å¢è¯¾ç¨‹
- `add-group` - æ–°å¢åˆ†ç»„
- `edit-group` - ç¼–è¾‘åˆ†ç»„
- `delete-group` - åˆ é™¤åˆ†ç»„
- `move-group` - ç§»åŠ¨åˆ†ç»„
- `class-detail` - è¯¾ç¨‹è¯¦æƒ…
- `move-class` - ç§»åŠ¨è¯¾ç¨‹
- `delete-class` - åˆ é™¤è¯¾ç¨‹
- `copy-class` - å¤åˆ¶è¯¾ç¨‹

### 3. ClassCardï¼ˆè¯¾ç¨‹å¡ç‰‡ï¼‰
**åŠŸèƒ½ï¼š** å•ä¸ªè¯¾ç¨‹çš„å±•ç¤ºå¡ç‰‡

**Propsï¼š**
- `classData` - è¯¾ç¨‹æ•°æ®
- `activeClassType` - è¯¾ç¨‹ç±»å‹
- `groupId` - åˆ†ç»„ID

**Eventsï¼š**
- `click` - ç‚¹å‡»äº‹ä»¶
- `move` - ç§»åŠ¨
- `delete` - åˆ é™¤
- `copy` - å¤åˆ¶

### 4. ScheduleCalendarï¼ˆæ—¥ç¨‹è¡¨ï¼‰
**åŠŸèƒ½ï¼š** å‘¨æ—¥å†è§†å›¾ï¼Œæ˜¾ç¤ºè¯¾è¡¨å’Œè¿åŠ¨è®°å½•

**Propsï¼š**
- `currentWeek` - å½“å‰å‘¨æ•°æ®
- `teamList` - å›¢é˜Ÿåˆ—è¡¨
- `athleticList` - è¿åŠ¨å‘˜åˆ—è¡¨
- `selectedTeam` - é€‰ä¸­çš„å›¢é˜Ÿ
- `selectedAthletic` - é€‰ä¸­çš„è¿åŠ¨å‘˜

**Eventsï¼š**
- `week-change` - å‘¨åˆ‡æ¢
- `team-change` - å›¢é˜Ÿåˆ‡æ¢
- `athletic-change` - è¿åŠ¨å‘˜åˆ‡æ¢
- `show-info` - æ˜¾ç¤ºä¿¡æ¯
- `show-statistic` - æ˜¾ç¤ºç»Ÿè®¡
- `refresh` - åˆ·æ–°
- `class-detail` - è¯¾è¡¨è¯¦æƒ…
- `activity-detail` - è¿åŠ¨è¯¦æƒ…
- `delete-schedule` - åˆ é™¤è¯¾è¡¨
- `unbind` - è§£ç»‘
- `delete-activity` - åˆ é™¤è¿åŠ¨
- `device-click` - è®¾å¤‡ç‚¹å‡»

### 5. ScheduleClassCardï¼ˆæ—¥ç¨‹è¯¾ç¨‹å¡ç‰‡ï¼‰
**åŠŸèƒ½ï¼š** æ—¥å†ä¸­çš„è¯¾è¡¨å¡ç‰‡

**Propsï¼š**
- `classItem` - è¯¾è¡¨æ•°æ®
- `date` - æ—¥æœŸ

**Eventsï¼š**
- `click` - ç‚¹å‡»
- `delete` - åˆ é™¤
- `device-click` - è®¾å¤‡ç‚¹å‡»

### 6. ActivityCardï¼ˆè¿åŠ¨è®°å½•å¡ç‰‡ï¼‰
**åŠŸèƒ½ï¼š** æ˜¾ç¤ºè¿åŠ¨è®°å½•

**Propsï¼š**
- `activity` - è¿åŠ¨æ•°æ®
- `date` - æ—¥æœŸ

**Eventsï¼š**
- `click` - ç‚¹å‡»
- `unbind` - è§£ç»‘
- `delete` - åˆ é™¤

### 7. StatisticsPanelï¼ˆç»Ÿè®¡é¢æ¿ï¼‰
**åŠŸèƒ½ï¼š** å³ä¾§ç»Ÿè®¡æ•°æ®å’ŒSTHå±•ç¤º

**Propsï¼š**
- `sthData` - STHæ•°æ®
- `statisticData` - ç»Ÿè®¡æ•°æ®
- `deviceList` - è®¾å¤‡åˆ—è¡¨

**Eventsï¼š**
- `device-change` - è®¾å¤‡çŠ¶æ€å˜æ›´

## ğŸ”§ å·¥å…·å’ŒæœåŠ¡

### Constantsï¼ˆå¸¸é‡ï¼‰
```javascript
import { 
  SPORT_TYPES,           // è¿åŠ¨ç±»å‹æšä¸¾
  SPORT_TYPE_ICONS,      // è¿åŠ¨ç±»å‹å›¾æ ‡
  DEVICE_TYPE_DICT,      // è®¾å¤‡ç±»å‹å­—å…¸
  WEEK_LIST              // å‘¨åˆ—è¡¨
} from './constants'
```

### Helpersï¼ˆå·¥å…·å‡½æ•°ï¼‰
```javascript
import { 
  getSportImageIcon,     // è·å–è¿åŠ¨å›¾æ ‡
  isToday,              // åˆ¤æ–­æ˜¯å¦ä»Šå¤©
  truncateByLines,      // æ–‡æœ¬æˆªæ–­
  parseClassesJson,     // è§£æè¯¾ç¨‹JSON
  isSportTypeMatch      // ç±»å‹åŒ¹é…åˆ¤æ–­
} from './utils/helpers'
```

### Servicesï¼ˆAPIæœåŠ¡ï¼‰
```javascript
import { 
  teamApi,              // å›¢é˜Ÿç›¸å…³API
  classApi,             // è¯¾ç¨‹ç›¸å…³API
  scheduleApi,          // è¯¾è¡¨ç›¸å…³API
  statisticsApi,        // ç»Ÿè®¡ç›¸å…³API
  athleteApi            // è¿åŠ¨å‘˜ç›¸å…³API
} from './services/classManagement'
```

### Mixinsï¼ˆæ··å…¥ï¼‰
```javascript
import dragMixin from './mixins/dragMixin'

// ä½¿ç”¨ï¼š
export default {
  mixins: [dragMixin],
  methods: {
    // è‡ªåŠ¨è·å¾—æ‹–æ‹½ç›¸å…³æ–¹æ³•
    initAllDrag()
    initClassDrag()
    initScheduleDrag()
    initActivityDrag()
    initClassScheduleCardDrag()
  }
}
```

## ğŸš€ ä½¿ç”¨æ–¹å¼

### æ–¹å¼1ï¼šç›´æ¥æ›¿æ¢ï¼ˆæ¨èï¼‰
```bash
# å¤‡ä»½åŸæ–‡ä»¶
mv index.vue index-old.vue

# ä½¿ç”¨é‡æ„ç‰ˆæœ¬
mv index-refactored.vue index.vue
```

### æ–¹å¼2ï¼šé€æ­¥è¿ç§»
1. å…ˆä¿ç•™ä¸¤ä¸ªæ–‡ä»¶å…±å­˜
2. åœ¨è·¯ç”±ä¸­æµ‹è¯• `index-refactored.vue`
3. ç¡®è®¤æ— é—®é¢˜åå†æ›¿æ¢

## ğŸ“ é‡æ„ä¼˜åŠ¿

### 1. å¯ç»´æŠ¤æ€§æå‡
- **åŸæ¥ï¼š** 3698è¡Œå•æ–‡ä»¶ï¼Œéš¾ä»¥å®šä½é—®é¢˜
- **ç°åœ¨ï¼š** æ¨¡å—åŒ–æ‹†åˆ†ï¼Œå¿«é€Ÿå®šä½åŠŸèƒ½

### 2. å¯å¤ç”¨æ€§æå‡
- **åŸæ¥ï¼š** ä»£ç é«˜åº¦è€¦åˆï¼Œéš¾ä»¥å¤ç”¨
- **ç°åœ¨ï¼š** ç»„ä»¶ç‹¬ç«‹ï¼Œå¯åœ¨å…¶ä»–é¡µé¢å¤ç”¨

### 3. å¯æµ‹è¯•æ€§æå‡
- **åŸæ¥ï¼š** å•å…ƒæµ‹è¯•å›°éš¾
- **ç°åœ¨ï¼š** æ¯ä¸ªç»„ä»¶å¯ç‹¬ç«‹æµ‹è¯•

### 4. åä½œæ•ˆç‡æå‡
- **åŸæ¥ï¼š** å¤šäººä¿®æ”¹æ˜“å†²çª
- **ç°åœ¨ï¼š** ä¸åŒäººä¿®æ”¹ä¸åŒç»„ä»¶

### 5. ä»£ç å¯è¯»æ€§æå‡
- **åŸæ¥ï¼š** éœ€è¦æ»šåŠ¨å¤§é‡ä»£ç 
- **ç°åœ¨ï¼š** ç»“æ„æ¸…æ™°ï¼Œä¸€ç›®äº†ç„¶

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ ·å¼ä¿æŒ**ï¼šæ‰€æœ‰æ ·å¼ä¿æŒä¸åŸç‰ˆä¸€è‡´
2. **åŠŸèƒ½å®Œæ•´**ï¼šæ‰€æœ‰åŠŸèƒ½å·²å®Œæ•´è¿ç§»
3. **æ‹–æ‹½åŠŸèƒ½**ï¼šä½¿ç”¨mixinså°è£…ï¼Œæ›´æ˜“ç»´æŠ¤
4. **APIè°ƒç”¨**ï¼šç»Ÿä¸€åˆ°serviceå±‚ï¼Œä¾¿äºç®¡ç†
5. **å‘åå…¼å®¹**ï¼šä¿ç•™åŸæ–‡ä»¶ï¼Œå¯éšæ—¶å›é€€

## ğŸ” è°ƒè¯•å»ºè®®

### æŸ¥çœ‹ç»„ä»¶æ ‘
ä½¿ç”¨Vue DevToolsæŸ¥çœ‹ç»„ä»¶å±‚çº§ç»“æ„

### ç›‘æ§æ•°æ®æµ
å…³æ³¨propså’Œeventsçš„ä¼ é€’

### æ£€æŸ¥æ‹–æ‹½
ç¡®ä¿Sortableåˆå§‹åŒ–æ­£ç¡®

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

1. å¯¹å¤§åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨
2. å¯¹é¢‘ç¹æ›´æ–°çš„æ•°æ®ä½¿ç”¨é˜²æŠ–
3. åˆç†ä½¿ç”¨computedç¼“å­˜è®¡ç®—ç»“æœ
4. é¿å…åœ¨templateä¸­ä½¿ç”¨å¤æ‚è®¡ç®—

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ·»åŠ æ–°åŠŸèƒ½æ—¶ï¼š
1. è¯„ä¼°æ˜¯å¦éœ€è¦æ–°ç»„ä»¶
2. æ›´æ–°constantsæˆ–helpers
3. åœ¨serviceå±‚æ·»åŠ API
4. æ›´æ–°æœ¬æ–‡æ¡£

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Vue 2 å®˜æ–¹æ–‡æ¡£](https://v2.cn.vuejs.org/)
- [Element UI æ–‡æ¡£](https://element.eleme.cn/)
- [Sortable.js æ–‡æ¡£](https://github.com/SortableJS/Sortable)

---

**é‡æ„å®Œæˆæ—¶é—´ï¼š** 2025-10-14  
**é‡æ„ç‰ˆæœ¬ï¼š** v2.0  
**Vueç‰ˆæœ¬ï¼š** 2.x  
**åŸæ–‡ä»¶è¡Œæ•°ï¼š** 3698è¡Œ  
**é‡æ„åï¼š** æ‹†åˆ†ä¸º12+ä¸ªæ–‡ä»¶ï¼Œå¹³å‡æ¯ä¸ªæ–‡ä»¶çº¦200è¡Œ

